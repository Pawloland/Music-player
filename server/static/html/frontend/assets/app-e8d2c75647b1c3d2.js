(function(){"use strict";var t={2773:function(t,e,s){var n=s(9242),o=s(3396),i=s(7139);const a=t=>((0,o.dD)("data-v-76365464"),t=t(),(0,o.Cn)(),t),l={id:"app"},r={id:"outer_left"},u=a((()=>(0,o._)("a",{href:"/admin"},[(0,o._)("img",{src:"/img/upload_album_v1.png",alt:"playlist"})],-1))),d={id:"outer_right"},c={id:"top"},p={id:"left"},_={id:"right"},g={id:"bottom"},h={class:"left"},m={id:"audio",ref:"audio",controls:""},f={ref:"audio_source",type:"audio/mp3"},v={class:"right"};function y(t,e,s,n,a,y){const b=(0,o.up)("cover"),w=(0,o.up)("item"),$=(0,o.up)("album_and_title"),S=(0,o.up)("media_menu");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",r,[(0,o._)("img",{src:"/img/playlist.png",alt:"playlist",class:(0,i.C_)(y.getPlaylistClass),onClick:e[0]||(e[0]=e=>{t.playlist_selected=!0,t.title="playlista pobrana z serwera",t.selected_song_index=void 0,y.resetSongTimings(),y.openPlaylist()})},null,2),u]),(0,o._)("div",d,[(0,o._)("div",c,[(0,o._)("div",p,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.albums,((e,s)=>((0,o.wg)(),(0,o.j4)(b,{key:e,onChange_album:s=>{t.title="web player cz4 - dragdrop",t.playlist_selected=!1,t.selected_song_index=void 0,y.resetSongTimings(),y.updateSelectedAlbum(e),y.getAllFiles(e)},prop_album:e,prop_index:s},null,8,["onChange_album","prop_album","prop_index"])))),128))]),(0,o._)("div",_,[(0,o._)("h1",null,(0,i.zw)(t.title),1),(0,o._)("table",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.songs,((e,s)=>((0,o.wg)(),(0,o.j4)(w,{key:e.title,onStart_song:t=>y.startSong(e.album,e.file,s),onResume_song:y.resumeSong,onPause_song:y.pauseSong,prop_album:e.album,prop_title:e.file,prop_size:e.size,prop_selected:y.getCurrentSelectedSong,prop_state:t.state},null,8,["onStart_song","onResume_song","onPause_song","prop_album","prop_title","prop_size","prop_selected","prop_state"])))),128))])])]),(0,o._)("div",g,[(0,o._)("div",h,[(0,o.Wm)($,{prop_album_and_title:y.getMediaMenuAlbumAndTitle},null,8,["prop_album_and_title"])]),(0,o.Wm)(S,{class:"centre",onPrevious_song:y.previousSong,onPause_song:y.pauseSong,onResume_song:y.resumeSong,onNext_song:y.nextSong,onChange_time:y.changeTime,prop_state:t.state,prop_song_done:this.song_done,prop_song_length:this.song_length},null,8,["onPrevious_song","onPause_song","onResume_song","onNext_song","onChange_time","prop_state","prop_song_done","prop_song_length"]),(0,o._)("audio",m,[(0,o._)("source",f,null,512)],512),(0,o._)("div",v,(0,i.zw)(y.getFormatedTimeDone)+" / "+(0,i.zw)(y.getFormatedTimeLength),1)])])])}const b=["src","alt"];function w(t,e,s,n,i,a){return(0,o.wg)(),(0,o.iD)("div",{onClick:e[0]||(e[0]=t=>a.emitChange())},[(0,o._)("img",{src:a.img_src,alt:t.album},null,8,b)])}var $={name:"Cover",props:["prop_album","prop_index"],methods:{emitChange:function(){console.log("Nastąpi zmiana wyświetlanego albumu z piosenkami na "+this.album),this.$emit("change_album",this.album)}},computed:{img_src:function(){return this.img}},data:function(){return{url:"/getCover",album:this.prop_album,index:this.prop_index,img:void 0}},created:async function(){let t=JSON.stringify({title:this.album,index:this.index}),e={"Contet-Type":"application/json;charset=utf-8"},s=await fetch(this.url,{mode:"cors",method:"POST",body:t,headers:e});if(!s.ok)return console.log(s.status),s.status;{let t=await s.blob();const e=new FileReader;e.readAsDataURL(t),e.addEventListener("load",(()=>{this.img=e.result}),!1)}}},S=s(89);const T=(0,S.Z)($,[["render",w],["__scopeId","data-v-26a38458"]]);var C=T;const x=t=>((0,o.dD)("data-v-51afb187"),t=t(),(0,o.Cn)(),t),z={class:"left"},P={class:"center"},M={class:"right"},A=x((()=>(0,o._)("td",null,null,-1))),k=x((()=>(0,o._)("td",null,null,-1))),O=["src"],j=x((()=>(0,o._)("img",{src:"/img/add_to_playlist.png",alt:"add_to_playlist"},null,-1))),F=[j];function I(t,e,s,n,a,l){return(0,o.wg)(),(0,o.iD)("tr",{class:(0,i.C_)(l.getTrClass),onMouseover:e[2]||(e[2]=e=>t.hover=!0),onMouseleave:e[3]||(e[3]=e=>t.hover=!1)},[(0,o._)("td",z,(0,i.zw)(s.prop_album),1),(0,o._)("td",P,(0,i.zw)(s.prop_title),1),(0,o._)("td",M,(0,i.zw)(l.size(s.prop_size)),1),A,k,(0,o._)("td",{class:(0,i.C_)(l.getInlineMenuClass),onClick:e[0]||(e[0]=t=>l.playThis())},[(0,o._)("img",{src:l.getStateImg,alt:"pause"},null,8,O)],2),(0,o._)("td",{class:(0,i.C_)(l.getInlineMenuClass),onClick:e[1]||(e[1]=t=>l.addToPlaylist())},F,2)],34)}var D={name:"Item",props:["prop_album","prop_title","prop_size","prop_selected","prop_state"],data:function(){return{addToPlaylistUrl:"/addToPlaylist",state:this.prop_selected==this.prop_title,was_selected_already:!1,was_paused:!1,was_resumed:!1,old_title:this.prop_title,hover:!1}},methods:{size:function(t,e=2){if(0===t)return"0 B";const s=1024,n=e<0?0:e,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,i)).toFixed(n))+" "+o[i]},playThis:function(){1==this.state?(this.state=!1,this.was_resumed=!1,this.was_paused=!0,this.$emit("pause_song")):1==this.was_selected_already?(this.state=!0,this.was_resumed=!0,this.was_paused=!1,this.$emit("resume_song")):(this.was_selected_already=!0,this.$emit("start_song",this.prop_title))},addToPlaylist:async function(){console.log("dodawanie do playlisty "+this.prop_album+"/"+this.prop_title);let t=JSON.stringify({album:this.prop_album,title:this.prop_title}),e={"Contet-Type":"application/json;charset=utf-8"},s=await fetch(this.addToPlaylistUrl,{method:"POST",body:t,headers:e});if(!s.ok)return s.status;alert(JSON.stringify(await s.json()))}},computed:{getStateImg:function(){return 1==this.state?"/img/pause_compact.png":"/img/play_compact.png"},getTrClass:function(){return 1==this.was_paused||1==this.was_selected_already||1==this.state||1==this.was_paused||1==this.was_resumed?"selected":"initial"},getInlineMenuClass:function(){return 1==this.state||1==this.was_selected_already||1==this.was_paused||1==this.was_resumed||1==this.hover?"controll":"hidden"}},watch:{prop_selected:function(t){this.old_title!=t&&(this.was_selected_already=!1,this.was_resumed=!1,this.was_paused=!1),this.state=this.prop_title==t,1==this.state&&(this.was_selected_already=!0,this.was_resumed=!1,this.was_paused=!1)},prop_title:function(t){this.old_title=t,this.was_resumed=!1,this.was_paused=!1,this.was_selected_already=!1,this.state=this.prop_selected==t},prop_state:function(t){1==this.was_selected_already&&(this.state=t)}},updated:function(){},created:function(){},mounted:function(){}};const L=(0,S.Z)(D,[["render",I],["__scopeId","data-v-51afb187"]]);var B=L;const N={id:"outer"},R={id:"buttons"},U=["src"];function E(t,e,s,n,a,l){return(0,o.wg)(),(0,o.iD)("div",N,[(0,o._)("div",{id:"music_scrubber",onClick:e[0]||(e[0]=t=>l.changeTime(t))},[(0,o._)("div",{id:"music_done",style:(0,i.j5)(l.scrubberStyle)},null,4)]),(0,o._)("div",R,[(0,o._)("img",{onClick:e[1]||(e[1]=t=>l.previousSong()),class:"small",src:"/img/previous.png",alt:"previous"}),(0,o._)("img",{onClick:e[2]||(e[2]=t=>l.startPauseResumeSong()),class:"big",src:l.img,alt:"play_stop"},null,8,U),(0,o._)("img",{onClick:e[3]||(e[3]=t=>l.nextSong()),class:"small",src:"/img/next.png",alt:"next"})])])}var H={name:"Media_menu",props:["prop_state","prop_song_done","prop_song_length"],methods:{previousSong:function(){this.$emit("previous_song")},startPauseResumeSong:function(){1==this.prop_state?this.$emit("pause_song"):this.$emit("resume_song")},nextSong:function(){this.$emit("next_song")},changeTime:function(t){let e=t.target.getBoundingClientRect(),s=t.clientX-e.left,n=t.clientY-e.top;console.log(s,n),console.log(Math.round(s)),0!=this.prop_song_length&&this.$emit("change_time",parseInt(Math.round(s))/200)}},computed:{img:function(){return 1==this.prop_state?"/img/pause.png":"/img/play.png"},scrubberStyle:function(){return console.log("ponowna zmiana scrubbera "+this.prop_song_done+" "+this.prop_song_length+" => "+parseInt(this.prop_song_done)/parseInt(this.prop_song_length)*100),0==this.prop_song_length||0==this.prop_song_done?"0%":`width:${parseInt(this.prop_song_done)/parseInt(this.prop_song_length)*100}%`}},watch:{prop_song_done:function(t){console.log("wykryto zmiane prop_song_done na "+t)},prop_song_length:function(t){console.log("wykryto zmiane prop_song_length na "+t)}}};const Z=(0,S.Z)(H,[["render",E],["__scopeId","data-v-e91591c8"]]);var J=Z;const W={ref:"left_outer",id:"left_outer"},Y={id:"wrapper"},K={id:"loop",ref:"loop"},q={id:"content",ref:"content"};function G(t,e,s,n,a,l){return(0,o.wg)(),(0,o.iD)("div",W,[(0,o._)("div",Y,[(0,o._)("div",K,[(0,o._)("div",q,[(0,o._)("span",null,(0,i.zw)(t.init_data),1)],512)],512)])],512)}var X={name:"Album_and_title",props:["prop_album_and_title"],data:function(){return{init_data:this.prop_album_and_title}},methods:{changeInnerText:function(t){let e=document.createElement("span");e.innerText=t,this.$refs.content.innerHTML="",this.$refs.content.append(e)},repeatContent:function(){this.$refs.content.offsetWidth>this.$refs.left_outer.offsetWidth&&(this.$refs.content.querySelector("span").className="padright",this.$refs.content.innerHTML+=this.$refs.content.innerHTML,this.$refs.loop.className="animate")},removeAdditionallContent:function(){let t=this.$refs.content.querySelector("span");this.$refs.content.innerHTML="",t.removeAttribute("class"),this.$refs.content.append(t),this.$refs.loop.removeAttribute("class")}},computed:{},watch:{prop_album_and_title:function(t){console.log("wyrkyto zmiane tytulu z watcha na: "+t),this.changeInnerText(t),this.repeatContent(),window.dispatchEvent(new Event("resize"))}},mounted:function(){this.repeatContent(),window.addEventListener("resize",(()=>{this.removeAdditionallContent(),this.repeatContent()}))}};const Q=(0,S.Z)(X,[["render",G],["__scopeId","data-v-231e4754"]]);var V=Q,tt={name:"App",components:{cover:C,item:B,media_menu:J,album_and_title:V},data:function(){return{getAllFoldersUrl:"/getAllFolders",getAllFilesUrl:"/getAllFiles",getPlaylistUrl:"/getPlaylist",title:"web player cz4 - dragdrop",albums:void 0,songs:void 0,selected_song:void 0,playing_album:void 0,state:!1,song_done:0,song_length:0,selected_song_index:void 0,playlist_selected:!1}},methods:{updateSelectedAlbum:function(t){this.playing_album=void 0,this.selected_song=void 0,this.state=!1,this.$refs.audio.pause(),this.$refs.audio_source.removeAttribute("src")},getAllFolders:async function(){let t=await fetch(this.getAllFoldersUrl,{method:"POST"});if(!t.ok)return t.status;this.albums=await t.json()},getAllFiles:async function(t){let e=JSON.stringify({title:t}),s={"Contet-Type":"application/json;charset=utf-8"},n=await fetch(this.getAllFilesUrl,{method:"POST",body:e,headers:s});if(!n.ok)return n.status;this.songs=await n.json()},previousSong:function(){if(void 0!=this.selected_song_index){console.log("Previous song");try{this.state=!0,this.selected_song=this.songs[this.selected_song_index-1].file,this.playing_album=this.songs[this.selected_song_index-1].album,this.selected_song_index--,this.$refs.audio_source.src=`/mp3/${this.playing_album}/${this.selected_song}`,this.$refs.audio.load()}catch(t){console.log("nie da się przewinąć zostaje:")}console.log(this.selected_song)}},startSong:function(t,e,s){console.log(`Starting song ${e}`),this.playing_album=t,this.selected_song=e,this.state=!0,this.$refs.audio_source.src=`/mp3/${this.playing_album}/${this.selected_song}`,this.$refs.audio.load(),this.selected_song_index=s},pauseSong:function(){void 0!=this.playing_album&&(console.log(`Pausing song ${this.selected_song}`),this.state=!1,this.$refs.audio.pause())},resumeSong:function(){void 0!=this.playing_album&&(console.log(`Resuming song ${this.selected_song}`),this.state=!0,this.$refs.audio.play())},nextSong:function(){if(void 0!=this.playing_album){console.log("Next song");try{this.state=!0,this.selected_song=this.songs[this.selected_song_index+1].file,this.playing_album=this.songs[this.selected_song_index+1].album,this.selected_song_index++,this.$refs.audio_source.src=`/mp3/${this.playing_album}/${this.selected_song}`,this.$refs.audio.load()}catch(t){console.log("nie da się przewinąć zostaje:")}console.log(this.selected_song)}},changeTime:function(t){console.log(`duration: ${this.$refs.audio.duration}`),console.log(`percent: ${t}`),console.log(`currentTime: ${Math.round(this.$refs.audio.duration*t)}`);let e=Math.round(this.$refs.audio.duration*t);this.$refs.audio.currentTime=e},updateSongDone:function(t){this.song_done=t},updateSongLength:function(t){this.song_length=t},resetSongTimings:function(){this.$refs.audio.currentTime=0,this.updateSongLength(0)},openPlaylist:async function(){console.log("otwieranie playlisty"),this.playing_album=void 0,this.selected_song=void 0,this.state=!1,this.$refs.audio.pause(),this.$refs.audio_source.removeAttribute("src");let t={"Contet-Type":"application/json;charset=utf-8"},e=await fetch(this.getPlaylistUrl,{method:"POST",headers:t});if(!e.ok)return e.status;this.songs=await e.json()}},computed:{getCurrentSelectedSong:function(){return this.selected_song},getCurrentState:function(){return this.state},getMediaMenuAlbumAndTitle:function(){return void 0==this.selected_song?"Tytuł albumu/tytuł utworu":`${this.playing_album}/${this.selected_song}`},getPlaylistClass:function(){return 1==this.playlist_selected?"active_playlist":"initial"},getFormatedTimeDone:function(){let t=Math.floor(this.song_done/60),e=this.song_done%60;return t=1==t.toString().length?`0${t}`:t,e=1==e.toString().length?`0${e}`:e,`${t}:${e}`},getFormatedTimeLength:function(){let t=Math.floor(this.song_length/60),e=this.song_length%60;return t=1==t.toString().length?`0${t}`:t,e=1==e.toString().length?`0${e}`:e,`${t}:${e}`}},created:async function(){await this.getAllFolders(),this.getAllFiles(this.albums[0]),this.$refs.audio.onloadeddata=t=>{t.target.play(),this.updateSongLength(Math.ceil(t.target.duration)),console.log(t.target.duration),t.target.ontimeupdate=t=>{this.updateSongDone(Math.ceil(t.target.currentTime)),console.log(t.target.currentTime)}}}};const et=(0,S.Z)(tt,[["render",y],["__scopeId","data-v-76365464"]]);var st=et;(0,n.ri)(st).mount("#app")}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,n,o,i){if(!n){var a=1/0;for(d=0;d<t.length;d++){n=t[d][0],o=t[d][1],i=t[d][2];for(var l=!0,r=0;r<n.length;r++)(!1&i||a>=i)&&Object.keys(s.O).every((function(t){return s.O[t](n[r])}))?n.splice(r--,1):(l=!1,i<a&&(a=i));if(l){t.splice(d--,1);var u=o();void 0!==u&&(e=u)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,o,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,i,a=n[0],l=n[1],r=n[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(r)var d=r(s)}for(e&&e(n);u<a.length;u++)i=a[u],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},n=self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(2773)}));n=s.O(n)})();